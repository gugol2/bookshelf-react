(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(37)},28:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(20),c=n.n(r),s=n(12),i=n(4),u=n(5),l=n(7),f=n(6),m=n(8),h=n(17),b="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var d={Accept:"application/json",Authorization:k},v=function(e){return fetch("".concat(b,"/books/").concat(e),{headers:d}).then(function(e){return e.json()}).then(function(e){return e.book})},p=function(e,t){return fetch("".concat(b,"/books/").concat(e.id),{method:"PUT",headers:Object(h.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()})},E=function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(h.a)({},d,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})},y=(n(28),n(11)),j=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={shelf:n.props.book.shelf||"none"},n.changeShelf=function(e){e.preventDefault();var t=e.target.value;n.setState(function(){return{shelf:t}}),n.props.moveBook(n.props.book,t)},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.book,t=e.title,n=e.authors,o=e.imageLinks;return a.a.createElement("div",{className:"book"},a.a.createElement("div",{className:"book-top"},a.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(o.thumbnail,")")}}),a.a.createElement("div",{className:"book-shelf-changer"},a.a.createElement("select",{value:this.state.shelf,onChange:this.changeShelf},a.a.createElement("option",{value:"move",disabled:!0},"Move to..."),a.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),a.a.createElement("option",{value:"wantToRead"},"Want to Read"),a.a.createElement("option",{value:"read"},"Read"),a.a.createElement("option",{value:"none"},"None")))),a.a.createElement("div",{className:"book-title"},t),a.a.createElement("div",{className:"book-authors"},n&&n.join(", ")))}}]),t}(a.a.Component),g=n(13),O=function(e){return e.sort(function(e,t){return e.title.localeCompare(t.title)})},N=function(e,t){var n=function(e,t){return e.map(function(e){return t.find(function(t){return t.id===e.id})||e})}(e.filter(function(e){return e.imageLinks}),t);return O(n)},S=function(e){return function(e){var t={},n=!0,o=!1,a=void 0;try{for(var r,c=e[Symbol.iterator]();!(n=(r=c.next()).done);n=!0){var i=r.value,u=Object(g.a)(i,2),l=u[0],f=u[1],m=Object(s.a)(f);t[l]=O(m)}}catch(h){o=!0,a=h}finally{try{n||null==c.return||c.return()}finally{if(o)throw a}}return t}(function(e){return Object.entries(e).sort(function(e,t){return e[0].localeCompare(t[0])})}(e.filter(function(e){return"none"!==e.shelf}).reduce(function(e,t){return e[t.shelf]=Object(s.a)(e[t.shelf]||[]).concat([t]),e},{})))},B=n(3),w=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={query:"",booksSearched:[],errMessage:""},n.debounce=function(e,t){return function(){for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];clearTimeout(n.timeout),n.timeout=setTimeout(function(){return e.apply(Object(y.a)(Object(y.a)(n)),a)},t)}},n.updateQuery=function(e){e.preventDefault();var t=e.target.value;n.setState(function(){return{query:t.trim().length?t:"",errMessage:""}},function(){return n.debounce(n.updateSearch,500)(n.state.query)})},n.updateSearch=function(e){e?E(e).then(function(e){e.error?(n.resetBookState("No books found!"),console.log("The error is: ".concat(e.error))):n.setState(function(t,n){return{booksSearched:N(e,n.books)}})}):n.resetBookState("Just type something and I will do my best!")},n.resetBookState=function(e){n.setState(function(){return{booksSearched:[],errMessage:e}})},n.moveBook=function(e,t){n.props.onMoveBook(e,t)},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.timeout=null}},{key:"render",value:function(){var e=this,t=this.state,n=t.query,o=t.booksSearched,r=t.errMessage;return a.a.createElement("div",{className:"search-books"},a.a.createElement("div",{className:"search-books-bar"},a.a.createElement(B.b,{className:"close-search",to:"/"},"Close"),a.a.createElement("div",{className:"search-books-input-wrapper"},a.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:n,onChange:this.updateQuery}))),a.a.createElement("div",{className:"search-books-results"},a.a.createElement("ol",{className:"books-grid"},o.map(function(t){return a.a.createElement("li",{key:t.id},a.a.createElement(j,{book:t,moveBook:e.moveBook}))}))),r&&a.a.createElement("div",{className:"search-books-error"},r))}}]),t}(a.a.Component),C=function(e){var t=e.booksInThisShelf,n=e.bookshelfName,o=function(t,n){e.moveBook(t,n)};return a.a.createElement("div",{className:"bookshelf"},a.a.createElement("h2",{className:"bookshelf-title"},function(){var e=n.split(/(?=[A-Z])/).join(" ");return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1))}()),a.a.createElement("div",{className:"bookshelf-books"},a.a.createElement("ol",{className:"books-grid"},t.map(function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(j,{book:e,moveBook:o}))}))))},M=function(e){var t=S(e.books),n=function(t,n){e.onMoveBook(t,n)};return a.a.createElement("div",{className:"list-books"},a.a.createElement("div",{className:"list-books-title"},a.a.createElement("h1",null,"Bookshelf React")),a.a.createElement("div",{className:"list-books-content"},a.a.createElement("div",null,Object.entries(t).map(function(e){var t=Object(g.a)(e,2),o=t[0],r=t[1];return a.a.createElement(C,{bookshelfName:o,booksInThisShelf:r,key:o,moveBook:n})}))),a.a.createElement("div",{className:"open-search"},a.a.createElement(B.b,{to:"/search"},a.a.createElement("button",null,"Add a book"))))},T=n(10),A=function(e){function t(){var e,n;Object(i.a)(this,t);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(a)))).state={books:[]},n.moveBook=function(e,t){p(e,t).then(function(t){v(e.id).then(function(e){n.setState(function(t){return{books:Object(s.a)(t.books.filter(function(t){return t.id!==e.id})).concat([e])}})})})},n}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/books"),{headers:d}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){e.setState(function(){return{books:t}})})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"app"},a.a.createElement(T.a,{exact:!0,path:"/",render:function(){return a.a.createElement(M,{onMoveBook:e.moveBook,books:e.state.books})}}),a.a.createElement(T.a,{path:"/search",render:function(){return a.a.createElement(w,{onMoveBook:e.moveBook,books:e.state.books})}}))}}]),t}(a.a.Component);n(35);c.a.render(a.a.createElement(B.a,null,a.a.createElement(A,null)),document.getElementById("root"))}},[[23,2,1]]]);
//# sourceMappingURL=main.7634700f.chunk.js.map